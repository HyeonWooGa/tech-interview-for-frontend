# HTTP와 HTTPS

## HTTP (HyperText Transfer Protocol)
HTTP란 **웹 상에서 클라이언트와 서버 간에 요청/응답으로 정보를 주고받을 수 있는 프로토콜**이다. 주로 HTML 문서를 주고받는데 쓰이고, TCP/IP 위에서 동작하며 80번 포트를 사용해 통신한다.

### HTTP 특징
- **비연결성(Connectionless)** : 요청과 응답을 주고받으면 바로 연결이 끊긴다.
- **무상태성(Stateless)** : 연결을 끊는 순간, 클라이언트와 서버의 통신은 끝나며 상태 정보를 유지하지 않는다.

<br>

## HTTP의 문제점
1. HTTP는 평문 통신이기 때문에 도청이 가능하다.
2. 통신 상대를 확인하지 않기 때문에 위장이 가능하다.
3. 완전성을 증명할 수 없기 때문에 변조가 가능하다.

*위 세가지는 다른 암호화히지 않은 프로토콜에도 공통되는 문제점이다.*

### TCP/IP는 도청 가능한 네트워크이다.
TCP/IP 구조의 통신은 전부 통신 경로 상에서 엿볼 수 있다. 패킷을 수집하는 것만으로 도청할 수 있다. 평문으로 통신할 경우, 메시지의 의미를 파악할 수 있기 때문에 암호화하여 통신해야 한다.

#### 보안 방법
1. **통신 자체를 암호화** :  `SSL(Secure Socket Layer)` or `TLS(Transport Layer Security)` 라는 다른 프로토콜을 조합함으로써 HTTP의 통신 내용을 함호화할 수 있다. SSL을 조합한 HTTP를 HTTPS라고 부른다.
2. **컨텐츠를 암호화** : 말 그대로 HTTP를 사용해 운반하는 내용인 HTTP 메시지에 포함되는 컨텐츠만 암호화하는 것이다. 암호화해서 전송하면 받은 측에서는 그 암호를 해독하여 출력하는 처리가 필요하다. 

### 통신 상대를 확인하지 않기 때문에 위장이 가능하다.
HTTP에 의한 통신에는 상대가 누구인지 확인하는 처리는 없기 때문에 누구든지 request를 보낼 수 있다. IP 주소나 포트 등에서 그 웹 서버에 엑세스 제한이 없는 경우 리퀘스트가 오면 상대가 누구든지 무언가의 response를 반환한다. 이러한 특징은 다음과 같은 문제점들을 유발한다.

1. request를 보낸 곳의 웹 서버가 원래 의도한 response를 보내야 하는 웹 서버인지를 확인할 수 없다.
2. response를 반환한 곳의 클라이언트가 원래 의도한 request를 보낸 클라이언트인지를 확인할 수 없다.
3. 통신하고 있는 상대가 접근이 허가된 상대인지를 확인할 수 없다.
4. 어디에서 누가 request 했는지 확인할 수 없다.
5. 의미없는 request도 수신한다. -> DoS 공격을 방지할 수 없다.

#### 보완 방법
`SSL`로 상대를 확인할 수 있다. SSL은 상대를 확인하는 수단으로 **증명서**를 제공하고 있다. 증명서는 신뢰할 수 있는 제 3자 기관에 의해 발행되는 것이기 때문에 서버나 클라이언트가 실재하는 사실을 증명한다. 이 증명서를 이용함으로써 **통신 상대가 내가 통신하고자 하는 서버임을 나타내고**, 이용자는 개인 정보 누설 등의 위험성이 줄어들게 된다. 또한, **클라이언트는 이 증명서로 본인 확인을 하고 웹사이트 인증에도 이용할 수 있다.**

### 완전성을 증명할 수 없기 때문에 변조가 가능하다.
여기서 완전성이란 **정보의 정확성**을 의미한다. **서버 또는 클라이언트에서 수신한 내용이 송신측에서 보낸 내용과 일치한다는 것을 보장할 수 없는 것이다.** request나 response가 발신된 후에 상대가 수신하는 사이에 누군가에 의해 변조되더라도 이 사실을 알 수 없다. 이와 같이 공격자가 도중에 request나 response를 빼앗아 변조하는 공격을 **중간자 공격(Man-in-the-Middle)**이라고 부른다.

<br>

## HTTPS (HTTP Secure or HTTP over SSL)
HTTPS는 **HTTP의 보안이 강화된 버전의 프로토콜**이다. HTTP는 원래 TCP와 직접 통신했지만, HTTPS에서 **HTTP는 SSL과 통신하고 SSL이 TCP와 통신**하게 된다. SSL을 사용한 HTTPS는 암호화와 증명서, 안전성 보호를 이용할 수 있게 된다.

HTTPS의 SSL에서는 `공통키 암호화 방식`과 `공개키 암호화 방식`을 혼합한 하이브리드 암호 시스템을 사용한다. 공통키를 `공개키 암호`화 방식으로 교환한 다음, 이후의 통신은 `공통키 암호`를 사용하는 방식이다.

### 특징
- HTTPS의 기본 TCP/IP 포트로 443번 포트를 사용한다.
- 웹 상에서 정보를 암호화하는 SSL이나 TLS 프로토콜을 통해 세션 데이터를 암호화한다. -> 기밀성(사샐활 보호), 데이터 무결성, ID 및 디지털 인증서를 사용한 인증을 제공한다.
- 데이터의 적절한 보호를 보장한다. 보호의 수준은 웹 브라우저에서의 구현 정확도와 서버 소프트웨어, 지원하는 암호화 알고리즘에 달려있다.

### 장점
- 네트워크 상에서 열람, 수정이 불가능하므로 안전하다.

### 단점
- 암호화를 하는 과정이 웹 서버에 부하를 준다.
- 설치 및 인증서를 유지하는데 추가 비용이 발생한다.
- HTTP에 비해 느리다.
- 인터넷 연결이 끊긴 경우 재인증 시간이 소요된다. HTTPS의 경우에는 소켓 자체에서 인증을 하기 때문에 인터넷 연결이 끊기면 소켓도 끊어져서 다시 HTTPS 인증이 필요하다.

<br>

## 참고
- [HTTP와 HTTPS | Github(Technical Interview)](https://github.com/WeareSoft/tech-interview/blob/master/contents/network.md#http%EC%99%80-https)
- [HTTP와 HTTPS | Github(JaeYeopHan)](https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/Network#http%EC%99%80-https)